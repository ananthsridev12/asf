-- Phase 1/2 foundation: dictionary + role tags
-- Run this once in your MySQL database.

CREATE TABLE IF NOT EXISTS relationship_dictionary (
  rel_key VARCHAR(100) PRIMARY KEY,
  label VARCHAR(160) NOT NULL,
  category ENUM('core','ancestor','descendant','cousin','in_law','extended','clan') NOT NULL DEFAULT 'extended',
  side ENUM('paternal','maternal','both','in_law','none') NOT NULL DEFAULT 'both',
  degree INT NOT NULL DEFAULT 0,
  generation_delta INT NOT NULL DEFAULT 0,
  is_active TINYINT(1) NOT NULL DEFAULT 1,
  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS person_roles (
  person_role_id BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  person_id BIGINT(20) UNSIGNED NOT NULL,
  role_key VARCHAR(80) NOT NULL,
  role_label VARCHAR(120) NOT NULL,
  is_active TINYINT(1) NOT NULL DEFAULT 1,
  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  UNIQUE KEY uniq_person_role (person_id, role_key),
  CONSTRAINT fk_person_roles_person FOREIGN KEY (person_id) REFERENCES persons(person_id) ON DELETE CASCADE
);

INSERT INTO relationship_dictionary (rel_key, label, category, side, degree, generation_delta) VALUES
('self','Self','core','both',0,0),
('father','Father','core','both',1,-1),
('mother','Mother','core','both',1,-1),
('son','Son','core','both',1,1),
('daughter','Daughter','core','both',1,1),
('elder_brother','Elder Brother','core','both',1,0),
('younger_brother','Younger Brother','core','both',1,0),
('elder_sister','Elder Sister','core','both',1,0),
('younger_sister','Younger Sister','core','both',1,0),
('brother','Brother','core','both',1,0),
('sister','Sister','core','both',1,0),
('husband','Husband','core','in_law',1,0),
('wife','Wife','core','in_law',1,0),
('spouse','Spouse','core','in_law',1,0),

('paternal_grandfather','Grandfather (Paternal)','ancestor','paternal',2,-2),
('paternal_grandmother','Grandmother (Paternal)','ancestor','paternal',2,-2),
('maternal_grandfather','Grandfather (Maternal)','ancestor','maternal',2,-2),
('maternal_grandmother','Grandmother (Maternal)','ancestor','maternal',2,-2),
('grandfather','Grandfather','ancestor','both',2,-2),
('grandmother','Grandmother','ancestor','both',2,-2),
('great_grandfather','Great Grandfather','ancestor','both',3,-3),
('great_grandmother','Great Grandmother','ancestor','both',3,-3),
('second_great_grandfather','Great Great Grandfather','ancestor','both',4,-4),
('second_great_grandmother','Great Great Grandmother','ancestor','both',4,-4),
('third_great_grandfather','Third Great Grandfather','ancestor','both',5,-5),
('third_great_grandmother','Third Great Grandmother','ancestor','both',5,-5),
('fourth_great_grandfather','Fourth Great Grandfather','ancestor','both',6,-6),
('fourth_great_grandmother','Fourth Great Grandmother','ancestor','both',6,-6),
('fifth_great_grandfather','Fifth Great Grandfather','ancestor','both',7,-7),
('fifth_great_grandmother','Fifth Great Grandmother','ancestor','both',7,-7),
('ancestor','Ancestor','ancestor','both',0,-1),
('forefather','Forefather','ancestor','both',0,-1),
('foremother','Foremother','ancestor','both',0,-1),

('grandson','Grandson','descendant','both',2,2),
('granddaughter','Granddaughter','descendant','both',2,2),
('great_grandson','Great Grandson','descendant','both',3,3),
('great_granddaughter','Great Granddaughter','descendant','both',3,3),
('second_great_grandson','Great Great Grandson','descendant','both',4,4),
('second_great_granddaughter','Great Great Granddaughter','descendant','both',4,4),
('third_great_grandson','Third Great Grandson','descendant','both',5,5),
('third_great_granddaughter','Third Great Granddaughter','descendant','both',5,5),
('fourth_great_grandson','Fourth Great Grandson','descendant','both',6,6),
('fourth_great_granddaughter','Fourth Great Granddaughter','descendant','both',6,6),
('descendant','Descendant','descendant','both',0,1),

('uncle','Uncle','extended','both',2,-1),
('aunt','Aunt','extended','both',2,-1),
('paternal_uncle','Father''s Brother','extended','paternal',2,-1),
('paternal_aunt','Father''s Sister','extended','paternal',2,-1),
('maternal_uncle','Mother''s Brother','extended','maternal',2,-1),
('maternal_aunt','Mother''s Sister','extended','maternal',2,-1),
('great_uncle','Great Uncle','extended','both',3,-2),
('great_aunt','Great Aunt','extended','both',3,-2),
('second_great_uncle','Second Great Uncle','extended','both',4,-3),
('second_great_aunt','Second Great Aunt','extended','both',4,-3),
('nephew','Nephew','extended','both',2,1),
('niece','Niece','extended','both',2,1),
('grand_nephew','Grand Nephew','extended','both',3,2),
('grand_niece','Grand Niece','extended','both',3,2),
('great_grand_nephew','Great Grand Nephew','extended','both',4,3),
('great_grand_niece','Great Grand Niece','extended','both',4,3),

('first_cousin','First Cousin','cousin','both',1,0),
('second_cousin','Second Cousin','cousin','both',2,0),
('third_cousin','Third Cousin','cousin','both',3,0),
('fourth_cousin','Fourth Cousin','cousin','both',4,0),
('first_cousin_once_removed','First Cousin Once Removed','cousin','both',1,1),
('first_cousin_twice_removed','First Cousin Twice Removed','cousin','both',1,2),
('first_cousin_thrice_removed','First Cousin Thrice Removed','cousin','both',1,3),
('cross_cousin','Cross Cousin','cousin','both',1,0),
('parallel_cousin','Parallel Cousin','cousin','both',1,0),
('elder_male_cousin','Elder Male Cousin','cousin','both',1,0),
('younger_male_cousin','Younger Male Cousin','cousin','both',1,0),
('elder_female_cousin','Elder Female Cousin','cousin','both',1,0),
('younger_female_cousin','Younger Female Cousin','cousin','both',1,0),

('brother_in_law','Brother-in-law','in_law','in_law',2,0),
('sister_in_law','Sister-in-law','in_law','in_law',2,0),
('father_in_law','Father-in-law','in_law','in_law',1,-1),
('mother_in_law','Mother-in-law','in_law','in_law',1,-1),
('grandfather_in_law','Grandfather-in-law','in_law','in_law',2,-2),
('grandmother_in_law','Grandmother-in-law','in_law','in_law',2,-2),
('great_grandfather_in_law','Great Grandfather-in-law','in_law','in_law',3,-3),
('great_grandmother_in_law','Great Grandmother-in-law','in_law','in_law',3,-3),
('second_great_grandfather_in_law','Great Great Grandfather-in-law','in_law','in_law',4,-4),
('second_great_grandmother_in_law','Great Great Grandmother-in-law','in_law','in_law',4,-4),
('son_in_law','Son-in-law','in_law','in_law',1,1),
('daughter_in_law','Daughter-in-law','in_law','in_law',1,1),
('nephew_in_law','Nephew-in-law','in_law','in_law',3,1),
('niece_in_law','Niece-in-law','in_law','in_law',3,1),
('uncle_in_law','Uncle-in-law','in_law','in_law',2,-1),
('aunt_in_law','Aunt-in-law','in_law','in_law',2,-1),
('co_brother','Co-brother','in_law','in_law',2,0),
('co_sister','Co-sister','in_law','in_law',2,0),
('husbands_elder_brother','Husband''s Elder Brother','in_law','in_law',2,0),
('husbands_younger_brother','Husband''s Younger Brother','in_law','in_law',2,0),
('husbands_sister','Husband''s Sister','in_law','in_law',2,0),
('wifes_brother','Wife''s Brother','in_law','in_law',2,0),
('wifes_elder_sister','Wife''s Elder Sister','in_law','in_law',2,0),
('wifes_younger_sister','Wife''s Younger Sister','in_law','in_law',2,0),

('stepfather','Stepfather','extended','both',1,-1),
('stepmother','Stepmother','extended','both',1,-1),
('stepbrother','Stepbrother','extended','both',1,0),
('stepsister','Stepsister','extended','both',1,0),
('stepson','Stepson','extended','both',1,1),
('stepdaughter','Stepdaughter','extended','both',1,1),
('step_grandfather','Step Grandfather','extended','both',2,-2),
('step_grandmother','Step Grandmother','extended','both',2,-2),
('step_grandson','Step Grandson','extended','both',2,2),
('step_granddaughter','Step Granddaughter','extended','both',2,2),
('adoptive_father','Adoptive Father','extended','both',1,-1),
('adoptive_mother','Adoptive Mother','extended','both',1,-1),
('adopted_son','Adopted Son','extended','both',1,1),
('adopted_daughter','Adopted Daughter','extended','both',1,1),

('clan_member','Clan Member','clan','none',0,0),
('lineage_head','Lineage Head','clan','none',0,0),
('family_elder','Family Elder','clan','none',0,0),
('family_head','Family Head','clan','none',0,0),
('family_patriarch','Family Patriarch','clan','none',0,0),
('family_matriarch','Family Matriarch','clan','none',0,0),
('no_direct_relationship','No direct relationship','extended','both',0,0)
ON DUPLICATE KEY UPDATE
  label = VALUES(label),
  category = VALUES(category),
  side = VALUES(side),
  degree = VALUES(degree),
  generation_delta = VALUES(generation_delta),
  is_active = 1;
